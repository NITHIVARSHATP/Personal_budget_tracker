{% extends "base.html" %}

{% block content %}
<div class="container py-5">
  <h2 class="text-center mb-4 fw-bold text-primary">Transactions Report - {{ selected_month }}</h2>
  <!-- Month Filter -->
  <form method="get" class="row g-3 justify-content-center mb-4">
    <div class="col-md-4">
      <select name="month" class="form-select shadow-sm">
        {% for month in months %}
          <option value="{{ month }}" {% if month == selected_month %}selected{% endif %}>
            {{ month }}
          </option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-2">
      <button type="submit" class="btn btn-primary w-100 shadow-sm">Filter</button>
    </div>
  </form>

  <!-- Table Section -->
  <div class="table-responsive animate-fade-in">
    <table class="table table-bordered table-striped table-hover shadow-sm rounded">
      <thead class="table-dark">
        <tr>
          <th>Date</th>
          <th>Category</th>
          <th>Amount (â‚¹)</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {% for t in transactions %}
        <tr>
          <td>{{ t.date }}</td>
          <td>{{ t.category }}</td>
          <td>â‚¹{{ t.amount }}</td>
          <td>{{ t.transaction_type }}</td>
          <td>{{ t.description }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center text-muted">No transactions found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Download Links -->
  <div class="text-center mt-4">
    <a href="{% url 'export_report_csv' %}?month={{ selected_month }}" class="btn btn-outline-success me-2">ðŸ“„ Download CSV</a>
    <a href="{% url 'export_report_pdf' %}?month={{ selected_month }}" class="btn btn-outline-danger">ðŸ§¾ Download PDF</a>

  </div>
</div>

<style>
  /* Simple fade-in on the table container */
  .animate-fade-in {
    opacity: 0;
    animation: fadeIn 1s ease forwards;
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }

  /* Table Styling */
  body {
    background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }

  table {
    background-color: #fff;
    border-radius: 12px;
    overflow: hidden;
  }

  thead th {
    background: #344e86;
    color: #fff;
    border: none;
  }

  tbody tr:hover {
    background-color: #f3f6fd;
    transform: scale(1.02);
    transition: transform 0.3s ease;
  }

  a.btn-outline-success {
  background: linear-gradient(135deg, #2ecc71, #27ae60);
  color: white;
  font-weight: 600;
  border: none;
  box-shadow: 0 4px 8px rgba(46, 204, 113, 0.4);
  transition: background 0.3s ease, box-shadow 0.3s ease;
  border-radius: 35px;
  padding: 0.5rem 1.2rem;
}

a.btn-outline-success:hover {
  background: linear-gradient(135deg, #27ae60, #2ecc71);
  box-shadow: 0 6px 14px rgba(39, 174, 96, 0.6);
  color: white;
  text-decoration: none;
}

a.btn-outline-danger {
  background: linear-gradient(135deg, #e74c3c, #c0392b);
  color: white;
  font-weight: 600;
  border: none;
  box-shadow: 0 4px 8px rgba(231, 76, 60, 0.4);
  transition: background 0.3s ease, box-shadow 0.3s ease;
  border-radius: 35px;
  padding: 0.5rem 1.2rem;
}

a.btn-outline-danger:hover {
  background: linear-gradient(135deg, #c0392b, #e74c3c);
  box-shadow: 0 6px 14px rgba(192, 57, 43, 0.6);
  color: white;
  text-decoration: none;
}

</style>
{% endblock %}
